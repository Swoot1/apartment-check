<html>
    <head>
        <meta charset="utf-8">
        <meta lang="sv">
        <style>
            .hidden {
                display: none;
            }
            .list-item {
                margin: 20px 10px;
            }
            .clickable {
                cursor: pointer;
            }
        </style>
        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.3.0/firebaseui.css" />
    </head>
    <body>
     <input type="button" class="signout" value="Logga ut" />
      <h1>Welcome to My Awesome App</h1>
        <div id="sign-in-status"></div>
        <div id="sign-in"></div>
        <div id="account-details"></div>
        <div id="firebaseui-auth-container"></div>
        <div class="content"></div>
        <div class="checklist-list"></div>
        <script src="https://cdn.firebase.com/libs/firebaseui/2.3.0/firebaseui.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.3.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.3.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.3.1/firebase-database.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyBSG55dlC9IerlUsdY8gq8yEfqn-d5RrWw",
            authDomain: "apartmentcheck-6831c.firebaseapp.com",
            databaseURL: "https://apartmentcheck-6831c.firebaseio.com",
            projectId: "apartmentcheck-6831c"
          };
          firebase.initializeApp(config);
        </script>
        <script type="text/javascript">
          // FirebaseUI config.
          var uiConfig = {
            signInSuccessUrl: '/', // TODO ELin set up
            signInOptions: [
              firebase.auth.GoogleAuthProvider.PROVIDER_ID,
              firebase.auth.FacebookAuthProvider.PROVIDER_ID,
              firebase.auth.TwitterAuthProvider.PROVIDER_ID
            ],
            // Terms of service url.
            tosUrl: '<your-tos-url>' // TODO elin
          };

          var ui = new firebaseui.auth.AuthUI(firebase.auth());
          ui.start('#firebaseui-auth-container', uiConfig);
        </script>
        <script type="text/javascript">
          initApp = function() {
            firebase.auth().onAuthStateChanged(function(user) {
              if (user) {
                var displayName = user.displayName;
                var email = user.email;
                var emailVerified = user.emailVerified;
                var photoURL = user.photoURL;
                var uid = user.uid;
                var phoneNumber = user.phoneNumber;
                var providerData = user.providerData;
                user.getIdToken().then(function(accessToken) {
                  document.getElementById('sign-in-status').textContent = 'Signed in';
                  document.getElementById('sign-in').textContent = 'Sign out';
                  document.getElementById('account-details').textContent = JSON.stringify({
                    displayName: displayName,
                    email: email,
                    emailVerified: emailVerified,
                    phoneNumber: phoneNumber,
                    photoURL: photoURL,
                    uid: uid,
                    accessToken: accessToken,
                    providerData: providerData
                  }, null, '  ');
                });
              } else {
                document.getElementById('sign-in-status').textContent = 'Signed out';
                document.getElementById('sign-in').textContent = 'Sign in';
                document.getElementById('account-details').textContent = 'null';
              }
            }, function(error) {
              console.log(error);
            });
          };

          window.addEventListener('load', function() {
            initApp()
          });
        </script>
        <script src="check-list.js"></script>
        <script src="tmpl.min.js"></script>
        <script type="text/x-tmpl" id="checklist">
            <label>
                Ge din lista ett namn för att lättare komma ihåg den 
                <br>
                <input type="text" class="js-checklist-name" />
            </label>
            {% for (var i=0; i<o.length; i++) { %}
                <div class="list-item js-list-item">
                    <span class="js-description">{%=o[i].description%}</span>
                    <input type="checkbox"
                           class="js-meets-requirements" {% if (o[i].meetsRequirements === true) { %} checked{% } else { %}{% } %} />
                    <br>
                    <div class="comment-section">
                        <span class="js-show-comment clickable">Skriv kommentar</span>
                        <span class="js-hide-comment hidden clickable">Dölj kommentar</span>
                        <br>
                        <textarea class="hidden js-comment">{%=o[i].comment%}</textarea>
                    </div>
                </div>
            {% } %}
            <input class="js-save-checklist" 
                   type="button" 
                   value="Spara" />
        </script>
        <script type="text/x-tmpl" id="checklist-list">
            <ul>
                {% for (var i=0; i<o.length; i++) { %}
                    <li>{%=o[i].name%} <span class="js-delete-checklist clickable" data-checklist-id="{%=o[i].id%}">[X]</span></li>
                {% } %}
            </ul>
        </script>
        <script src="script.js"></script>
    </body>
</html>